{% extends "base.html" %}

{% load i18n %}

{% block page-id %}dashboard{% endblock %}


{% block title %}{% trans "Report results" %}{% endblock %}

{% block content %}


{% if not report %}

    <h2>{% trans "No report yet" %}</h2>
    
    
{% else %}

    <!-- todo: improve headers : factorize common fields and shorten -->

    <div id="dashboard-header" class="span-24 last">

        <h2 id="title-prefix" class="span-24 last">
            {% trans "Report" %}: {{ report.name }}
        </h2>
        
        <div id="pagination" class="span-20" >
        
        {% if view %}
        
        {% if page.has_previous %}
         <p  class="previous" >
            <a href="?page={{ page.previous_page_number }}">
                &lt; {% trans "Previous" %}
            </a>
         </p>
        {% endif %}
        
        <h3 title={{ report.code }}>
            View: <a href="#">{{ view.name|title }}</a>
        </h3> 
         
        {% if page.has_next %}
        <p  class="next" >
            <a href="?page={{ page.next_page_number }}">
                {% trans "Next" %} &gt;
            </a>
        </p>
        {% endif %}
        
         </div>
        
        <p id="campaign-date" class="span-4 last" >
        {% trans "starts on" %} 
        {{ report.start_date|date:"SHORT_DATE_FORMAT" }}
        </p>
        
        {% else %}
        <p>No view declared for this report. You must create a view
           to describe how you want to display the report.</p>
        {% endif %}
    
    </div>
    
    
    <div class="span-24 last">
   
    {% if header %}
    <table>
        <thead>
        <tr>
            {% for cell in header %}
            <th>{{ cell }}</th>
            {% endfor %}
        </tr>
        </thead>
        
        <tbody>
        
        {% if body %}
                
        {% for row in body %}
            <tr>
            {% for cell in row.itervalues %}
                <td>{{ cell }}</td>
            {% endfor %}
            </tr>
    
        {% endfor %}
        
        {% else %}
            <tr><td  colspan="{{ header|length }}" >{% trans "No record yet" %}</td></tr>
        
        {% endif %}
        
        </tbody>
    
    </table>
    
    {% else %}
    
    {% if view %}
    <p>No indicator declared for this view. You must choose the indicators
    you wish to display from the report.</p>
    {% endif %}
   
    {% endif %}
    
{% endif %}


{% endblock %}
